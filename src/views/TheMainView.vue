<template>
    <div>
      <!-- carousel -->
      <v-carousel height="400" width="100%" cycle hide-delimiter-background>
        <v-carousel-item v-for="(slide, i) in slides" :key="i">
          <v-sheet :color="colors[i]" height="100%">
            <div class="d-flex fill-height justify-center align-center">
              <div class="spotname">{{ slide }}</div>
            </div>
          </v-sheet>
        </v-carousel-item>
        <button class="detail-button" @click="viewDetails(slides.length - 1)">
          ìì„¸íˆ ë³´ê¸°
        </button>
      </v-carousel>
  
      <!-- ì§€ì—­ ì„ íƒì§€ -->
      <v-item-group mandatory v-model="selectedArea">
        <v-container class="centered">
          <v-row>
            <v-col cols="12">
              <v-row>
                <v-col v-for="(area, index) in sido" :key="index">
                  <v-item>
                    <v-card
                      :color="selectedArea === area ? '#FFC700' : '#f0f0f0'"
                      class="d-flex align-center"
                      height="40"
                      width="55"
                      dark
                      @click="selectedArea = area"
                    >
                      <v-scroll-y-transition>
                        <div class="local flex-grow-1 text-center font-size">
                          {{ area }}
                        </div>
                      </v-scroll-y-transition>
                    </v-card>
                  </v-item>
                </v-col>
              </v-row>
            </v-col>
          </v-row>
        </v-container>
      </v-item-group>
  
      <body>
        <!-- ì—¬í–‰ ì¹´ë“œ -->
        <v-row class="centered">
          <v-col cols="12">
            <h3 class="custom-heading">ğŸ”¥ì¸ê¸° ì—¬í–‰ ì½”ìŠ¤</h3>
            <br />
          </v-col>
          <v-col
            v-for="(card, index) in cards"
            :key="index"
            cols="12"
            sm="6"
            md="4"
            lg="3"
            class="my-col"
          >
            <v-hover v-slot="{ isHovering, props }">
              <v-card
                class="mx-auto card-wrapper"
                max-width="300"
                max-height="320"
                v-bind="props"
              >
                <v-img :src="card.imageUrl" aspect-ratio="1.3"></v-img>
                <v-card-text>
                  <h2 class="cardSpotName">{{ card.name }}</h2>
                  <p class="cardSpotDes">{{ card.description }}</p>
                </v-card-text>
                <v-card-title>
                  <span class="text-primary text-subtitle-2">64 Reviews</span>
                </v-card-title>
                <v-overlay
                  :model-value="isHovering"
                  class="align-center justify-center"
                  scrim="#ccc"
                  contained
                >
                  <router-link to="/spotDetail">
                    <v-btn class="moreInfo" variant="flat"
                      >ìƒì„¸ ì •ë³´ ë³´ëŸ¬ê°€ê¸°</v-btn
                    >
                  </router-link>
                </v-overlay>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12">
            <h3 class="custom-heading">ğŸ”¥ì¸ê¸° ì—¬í–‰ì§€</h3>
            <br />
          </v-col>
          <v-col
            v-for="(card, index) in cards"
            :key="index"
            cols="12"
            sm="6"
            md="4"
            lg="3"
            class="my-col"
          >
            <v-hover v-slot="{ isHovering, props }">
              <v-card
                class="mx-auto card-wrapper"
                max-width="300"
                max-height="320"
                v-bind="props"
              >
                <v-img :src="card.imageUrl" aspect-ratio="1.3"></v-img>
                <v-card-text>
                  <h2 class="cardSpotName">{{ card.name }}</h2>
                  <p class="cardSpotDes">{{ card.description }}</p>
                </v-card-text>
                <v-card-title>
                  <span class="text-primary text-subtitle-2">64 Reviews</span>
                </v-card-title>
                <v-overlay
                  :model-value="isHovering"
                  class="align-center justify-center"
                  scrim="#ccc"
                  contained
                >
                  <v-btn class="moreInfo" variant="flat"
                    >ìƒì„¸ ì •ë³´ ë³´ëŸ¬ê°€ê¸°</v-btn
                  >
                </v-overlay>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12">
            <h3 class="custom-heading">ğŸ”¥ì¸ê¸°ê¸€</h3>
            <br />
          </v-col>
          <v-col
            v-for="(card, index) in cards"
            :key="index"
            cols="12"
            sm="6"
            md="4"
            lg="3"
            class="my-col"
          >
            <v-hover v-slot="{ isHovering, props }">
              <v-card
                class="mx-auto card-wrapper"
                max-width="300"
                max-height="320"
                v-bind="props"
              >
                <v-img :src="card.imageUrl" aspect-ratio="1.3"></v-img>
                <v-card-text>
                  <h2 class="cardSpotName">{{ card.name }}</h2>
                  <p class="cardSpotDes">{{ card.description }}</p>
                </v-card-text>
                <v-card-title>
                  <span class="text-primary text-subtitle-2">64 Reviews</span>
                </v-card-title>
                <v-overlay
                  :model-value="isHovering"
                  class="align-center justify-center"
                  scrim="#ccc"
                  contained
                >
                  <v-btn class="moreInfo" variant="flat"
                    >ìƒì„¸ ì •ë³´ ë³´ëŸ¬ê°€ê¸°</v-btn
                  >
                </v-overlay>
              </v-card>
            </v-hover>
          </v-col>
        </v-row>
      </body>
    </div>
  </template>
  
  <script setup>
  import { ref, onMounted } from "vue";
  import axios from "axios";
  
  const colors = ref([
    'indigo',
    'warning',
    'pink darken-2',
    'red lighten-1',
    'deep-purple accent-4',
  ]);
  
  const slides = ref(['ì—¬í–‰ì§€ì´ë¦„1', 'ì—¬í–‰ì§€ì´ë¦„2', 'ì—¬í–‰ì§€ì´ë¦„3', 'ì—¬í–‰ì§€ì´ë¦„4', 'ì—¬í–‰ì§€ì´ë¦„5']);
  const sido = ref(['ì „êµ­', 'ì„œìš¸', 'ì¸ì²œ', 'ê²½ê¸°', 'ê°•ì›', 'ëŒ€ì „', 'ë¶€ì‚°', 'ëŒ€êµ¬', 'ê´‘ì£¼', 'ì œì£¼', 'ì „ë¼']);
  const selectedArea = ref(sido.value[0]); // ì²« ë²ˆì§¸ ìš”ì†Œë¥¼ ê¸°ë³¸ ì„ íƒ ê°’ìœ¼ë¡œ ì„¤ì •
  const cards = ref([]);
  
  const fetchTopSpots = async () => {
    try {
      const response = await axios.get('http://localhost/api/spots/top/4');
      cards.value = response.data;
      console.log(`ë°›ì€ cardsì˜ ìˆ˜: ${cards.value.length}`); // ë°›ì€ cardsì˜ ìˆ˜ë¥¼ ì½˜ì†”ì— ì¶œë ¥
    } catch (error) {
      console.error("Error fetching top spots:", error);
    }
  };
  
  onMounted(() => {
    fetchTopSpots();
  });
  
  const viewDetails = (index) => {
    console.log('Details for slide:', index + 1);
  };
  </script>
  
  <style>
  @font-face {
    font-family: "GongGothicMedium";
    src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-10@1.0/GongGothicMedium.woff")
      format("woff");
    font-weight: normal;
    font-style: normal;
  }
  
  /* carousel ì•ˆ í…ìŠ¤íŠ¸ */
  .spotname {
    font-family: "GongGothicMedium";
    font-size: 60px;
  }
  
  /* carousel ì•ˆ ìì„¸íˆ ë³´ê¸° ë²„íŠ¼ */
  .detail-button {
    font-family: "GongGothicMedium";
    position: absolute;
    bottom: 40px;
    right: 40px;
    padding: 15px 30px;
    background-color: #ffc700;
    color: #fff;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-size: 18px;
    transition: background-color 0.3s;
  }
  
  /* ìì„¸íˆ ë³´ê¸° ë²„íŠ¼ ë§ˆìš°ìŠ¤ ì˜¤ë²„ */
  .detail-button:hover {
    font-family: "GongGothicMedium";
    background-color: #006769;
  }
  
  /* ì§€ì—­ íƒœê·¸ í…ìŠ¤íŠ¸ */
  .local {
    font-family: "GongGothicMedium";
    font-size: 18px;
  }
  
  /* ì¹´ë“œ ì•ˆ ì—¬í–‰ì§€ ì´ë¦„ */
  .cardSpotName {
    font-family: "GongGothicMedium";
    font-size: 15px;
    color: #ffb108;
  }
  
  /* ì¹´ë“œ ì•ˆ ì—¬í–‰ì§€ ì„¤ëª… */
  .cardSpotDes {
    font-family: "GongGothicMedium";
    font-size: 13px;
  }
  
  /* ìƒˆë¡œìš´ í´ë˜ìŠ¤ card-wrapperì— í…Œë‘ë¦¬ì™€ ë™ê·¸ë€ ëª¨ì„œë¦¬ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
  .card-wrapper {
    max-width: 200px;
    border-radius: 15px;
    overflow: hidden;
  }
  
  .card-wrapper:hover {
    border-color: #007bff;
    transform: scale(1.05);
  }
  
  /* ìƒì„¸ ì •ë³´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
  .moreInfo {
    font-family: "GongGothicMedium";
    font-size: 40px;
    min-width: 200px;
    min-height: 50px;
  }
  
  .centered {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .custom-heading {
    font-family: "GongGothicMedium";
    margin-left: 50px;
    margin-top: 20px;
    margin-bottom: -20px;
  }
  </style>
  